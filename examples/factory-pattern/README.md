# Factory Pattern Example

This example demonstrates generating TypeScript factory exports using the variable template system.

## Configuration

The `barrel.config.json` file specifies:
- **Export format**: `export * as Cutie{fileName:pascal}Factory from './{fileName}.ts'`
- **Input**: `./src/cutie/**/*.ts` (scans for TypeScript files)
- **Output**: `./src/cutie/index.ts`
- **Excludes**: `**/index.ts` (avoids self-reference)

## Expected Output

When running `npx ollypop generate`, the generated `./src/cutie/index.ts` should contain:

```typescript
// This file is auto-generated by @validkeys/ollypop-ts
// Do not edit this file manually - your changes will be overwritten

export * as CutieChangesetFactory from './changeset.ts'
export * as CutieInstructionFactory from './instruction.ts'
```

## Files Structure

```
examples/factory-pattern/
├── barrel.config.json
├── README.md
└── src/
    └── cutie/
        ├── changeset.ts     # Sample factory with TypeScript exports
        ├── instruction.ts   # Sample factory with TypeScript exports
        └── index.ts         # Generated barrel file (created by ollypop)
```

## Running the Example

From the factory-pattern directory:

```bash
npx ollypop generate
```

Or from the project root:

```bash
pnpm run example:factory
```

## Debugging

This example was specifically designed to debug the error:
"Cannot determine path from export template. Expected format: export * from "./path/{variable}/..."

The issue occurred because the template engine's regex pattern only supported `export * from` syntax but not `export * as Name from` syntax used in factory patterns.

**Solution**: Updated the regex pattern in `src/templates.ts` to support both export formats:
- `export * from './path/{variable}'` (original)
- `export * as Name from './path/{variable}'` (factory pattern)

The fix enables more flexible export patterns while maintaining backward compatibility.
